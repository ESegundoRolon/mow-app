## Table of contents
* [General info](#general-info)
* [Technologies](#technologies)
* [Setup](#setup)
* [Testing](#testing)
* [Logging](#logging)

## General info
This project is a challenge to build a program that implements an algorithm to mow rectangular surfaces

* A mower's position is represented by Cartesian coordinates (X, Y), and an orientation (N, E, W, S).
* To move the mower, we use a series of a combination of the following commands: L, R, and F.
L and R turn the mower 90Â° left or right without moving the mower. F means move forward one
space in the direction the mower is currently facing without changing its orientation.
* If a forward movement would cause the mower to move outside of the lawn, the mower remains
in the position and this command is discarded. The position directly to the north of (X, Y) is (X, Y+ 1) and the position to the east of (X, Y) is (X + 1, Y).
* Only one mower can occupy the same position on the lawn. Any attempt to move into a occuped position will be discarded as an action.

	
## Technologies
Project is created with:
* JDK version: 11.0.5
* Maven Plugin version: 3.6.3
* Docker 18.03.0 (Optional)
	
## Setup
To run this project, by default the file located on src/main/resources/laxn.twt will be used as input. Install it locally using the following git cli commands:

```
$ git clone https://github.com/ESegundoRolon/mow-app.git
$ cd mow-app
$ mvn clean install
$ java -jar ./target/mow-app-1.0-SNAPSHOT-jar-with-dependencies.jar
```

To achieve simulation using custom file, pass the file path as parameter. For example given the file file:/C:/System/example2.txt:

```
$ git clone https://github.com/ESegundoRolon/mow-app.git
$ cd mow-app
$ mvn clean install
$ java -jar ./target/mow-app-1.0-SNAPSHOT-jar-with-dependencies.jar file:/C:/System/example2.txt
```

If the given input file has errors, you will see an output message as follows:

```
Exception in thread "main" com.mow.app.exception.BusinessException: Mowers should not be overlapping
```

If there is no jdk 11 installed on your machine, alternatively you could use docker to build and run the application as follows:

```
$ git clone https://github.com/ESegundoRolon/mow-app.git
$ cd mow-app
$ docker build -t esegundorolon/mow-app .
$ docker run --rm esegundorolon/mow-app
```

## Testing

After the install of the project, the code coverage is generated by jacoco and the results could be found at:

```
mow-app/target/site/jacoco/index.html
```

The unit test are run while the application is packaged using the maven install command. To run only unit test you must run the following commands:

```
$ git clone https://github.com/ESegundoRolon/mow-app.git
$ cd mow-app
$ mvn clean test -P dev
```

In order to run the integration test, use the following commands:

```
$ git clone https://github.com/ESegundoRolon/mow-app.git
$ cd mow-app
$ mvn clean verify -P integration-test
```

## Logging

By default there is only console logging activated. In order to activate the file appender, the log4j.properties file located on src/main/resources should be configured as follows:

```
# Root logger option
log4j.rootLogger=DEBUG, stdout, file

# Redirect log messages to console
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %t %-5p %c{1}:%L - %m%n

# Redirect log messages to a log file, support file rolling.
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.append=false
log4j.appender.file.File=C:\\log4j-mow-application.log
log4j.appender.file.MaxFileSize=5MB
log4j.appender.file.MaxBackupIndex=10
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %t %-5p %c{1}:%L - %m%n
```
